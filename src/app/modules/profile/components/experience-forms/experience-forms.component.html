@if (form) {
<ng-container>
  <div>
    <form [formGroup]="form">
      <div formArrayName="experience">
        @for (forms of experienceFormArray.controls; track $index) {
        <div class="w-full bg-white shadow-lg rounded-lg overflow-hidden border-b mb-4">
          <div class="px-4 py-2 bg-gray-200 flex justify-between items-center">
            <p class="text-lg font-semibold">Experience Form {{$index+1}}</p>
            <button (click)="removeForms($index)" class="text-gray-500 hover:text-gray-700 focus:outline-none">
              <svg-icon src="assets/icons/close.svg" [svgClass]="'h-5 w-5 svg-icon'"> </svg-icon>
            </button>
          </div>

          <div [formGroupName]="$index" class="p-4">
            <div class="flex flex-col space-y-4 mt-4">
              <div class="pb-4">
                <app-calendar [formGroup]="experienceFormGroupIndex($index)" [label]="'Start Date'"
                  fieldName="startDate" [placeholder]="'Start Date'">
                </app-calendar>
              </div>
              <div class="">
                <app-calendar [formGroup]="experienceFormGroupIndex($index)" [label]="'End Date'" fieldName="endDate"
                  [placeholder]="'End Date'">
                </app-calendar>
              </div>
              <div class="pt-4">
                <app-form-field [formGroup]="experienceFormGroupIndex($index)" [label]="'location'"
                  fieldName="location" />
              </div>
              <div class="py-2">
                <app-form-field class="mt-4" [formGroup]="experienceFormGroupIndex($index)" [label]="'position'"
                  fieldName="position" />
              </div>
              <div class="pb-2">
                <app-form-field class="mt-4" [formGroup]="experienceFormGroupIndex($index)" [label]="'Company Name'"
                  fieldName="company" />
              </div>
              <div>
                <p-editor formControlName="responsibilities" [style]="{ height: '320px' }"></p-editor>
              </div>
            </div>
          </div>
        </div>
        }

      </div>
    </form>
    <div class="bg-white border-gray-200 text-right rounded-b-lg">
      <div class="flex space-x-4">
        <div>
          <app-button [label]="'Add'" (clicked)="addNewForms()" />
        </div>
        <div>
          <app-button [label]="'Save'" (clicked)="onSubmit()" />
        </div>
      </div>
    </div>
  </div>
</ng-container>
}
